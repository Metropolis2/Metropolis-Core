{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Array_of_Agent_for_double",
  "type": "array",
  "items": {
    "$ref": "#/definitions/Agent_for_double"
  },
  "definitions": {
    "Agent_for_double": {
      "title": "Agent",
      "description": "Abstract representation of an individual that makes one trip per day.",
      "examples": [
        {
          "id": 1,
          "mode_choice": {
            "type": "Logit",
            "value": {
              "mu": 2.0,
              "u": 0.5
            }
          },
          "modes": [
            {
              "type": "Constant",
              "value": 1.0
            },
            {
              "type": "Road",
              "value": {
                "departure_time_model": {
                  "type": "ContinuousChoice",
                  "value": {
                    "choice_model": {
                      "type": "Logit",
                      "value": {
                        "mu": 4.0,
                        "u": 0.5
                      }
                    },
                    "period": [
                      0.0,
                      86400.0
                    ]
                  }
                },
                "destination": 1,
                "origin": 0,
                "utility_model": {
                  "type": "Proportional",
                  "value": -10.0
                },
                "vehicle": 0
              }
            }
          ],
          "schedule_utility": {
            "type": "AlphaBetaGamma",
            "value": {
              "beta": 5.0,
              "desired_arrival": true,
              "gamma": 20.0,
              "t_star_high": 31350.0,
              "t_star_low": 27900.0
            }
          }
        }
      ],
      "type": "object",
      "required": [
        "modes"
      ],
      "properties": {
        "id": {
          "description": "Id used when writing the results of the agents.",
          "default": 0,
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        },
        "modes": {
          "description": "Modes accessible to the agent.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Mode_for_double"
          },
          "minItems": 1
        },
        "mode_choice": {
          "description": "Choice model used for mode choice.\n\nWhen not specified, the first mode is always chosen.",
          "allOf": [
            {
              "$ref": "#/definitions/ChoiceModel_for_double"
            }
          ],
          "nullable": true
        },
        "schedule_utility": {
          "description": "Schedule-utility preferences.",
          "allOf": [
            {
              "$ref": "#/definitions/ScheduleUtility_for_double"
            }
          ]
        }
      }
    },
    "Mode_for_double": {
      "title": "Mode",
      "description": "Mode of transportation available to an agent.",
      "oneOf": [
        {
          "description": "A mode of transportation that always provide the same utility level.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Constant"
              ]
            },
            "value": {
              "$ref": "#/definitions/Utility_for_double"
            }
          }
        },
        {
          "description": "A trip with a vehicle on the road network, with potential congestion.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Road"
              ]
            },
            "value": {
              "$ref": "#/definitions/RoadMode_for_double"
            }
          }
        }
      ]
    },
    "Utility_for_double": {
      "description": "Representation of a utility (or monetary) amount.",
      "type": "number",
      "format": "double"
    },
    "RoadMode_for_double": {
      "title": "Road Mode",
      "description": "Mode of transportation for a vehicle that travels on the road network.",
      "examples": [
        {
          "departure_time_model": {
            "type": "ContinuousChoice",
            "value": {
              "choice_model": {
                "type": "Logit",
                "value": {
                  "mu": 4.0,
                  "u": 0.5
                }
              },
              "period": [
                0.0,
                86400.0
              ]
            }
          },
          "destination": 1,
          "origin": 0,
          "utility_model": {
            "type": "Proportional",
            "value": -10.0
          },
          "vehicle": 0
        }
      ],
      "type": "object",
      "required": [
        "departure_time_model",
        "destination",
        "origin",
        "vehicle"
      ],
      "properties": {
        "origin": {
          "description": "Id of the origin node on the road network graph.",
          "allOf": [
            {
              "$ref": "#/definitions/NodeIndex"
            }
          ]
        },
        "destination": {
          "description": "Id of the destination node on the road network graph.",
          "allOf": [
            {
              "$ref": "#/definitions/NodeIndex"
            }
          ]
        },
        "vehicle": {
          "description": "Id of the vehicle.",
          "allOf": [
            {
              "$ref": "#/definitions/VehicleIndex"
            }
          ]
        },
        "departure_time_model": {
          "description": "Model used for the departure-time choice.",
          "allOf": [
            {
              "$ref": "#/definitions/DepartureTimeModel_for_double"
            }
          ]
        },
        "utility_model": {
          "description": "Travel-utility model describing how travel utility is computed.",
          "allOf": [
            {
              "$ref": "#/definitions/TravelUtility_for_double"
            }
          ]
        }
      }
    },
    "NodeIndex": {
      "type": "integer",
      "format": "uint",
      "minimum": 0.0
    },
    "VehicleIndex": {
      "description": "Vehicle identifier.",
      "type": "integer",
      "format": "uint",
      "minimum": 0.0
    },
    "DepartureTimeModel_for_double": {
      "description": "Model used to compute the chosen departure time.",
      "oneOf": [
        {
          "description": "The departure time is always equal to the given value.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Constant"
              ]
            },
            "value": {
              "$ref": "#/definitions/Time_for_double"
            }
          }
        },
        {
          "description": "The departure time is chosen according to a continuous choice model.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "ContinuousChoice"
              ]
            },
            "value": {
              "type": "object",
              "required": [
                "choice_model",
                "period"
              ],
              "properties": {
                "period": {
                  "description": "Interval in which the departure time is chosen.",
                  "allOf": [
                    {
                      "$ref": "#/definitions/Interval_for_double"
                    }
                  ]
                },
                "choice_model": {
                  "description": "Continuous choice model.",
                  "allOf": [
                    {
                      "$ref": "#/definitions/ContinuousChoiceModel_for_double"
                    }
                  ]
                }
              }
            }
          }
        }
      ]
    },
    "Time_for_double": {
      "description": "Representation of time duration or timestamp, expressed in seconds.",
      "type": "number",
      "format": "double"
    },
    "Interval_for_double": {
      "title": "Interval",
      "description": "Interval of time.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Time_for_double"
      },
      "maxItems": 2,
      "minItems": 2
    },
    "ContinuousChoiceModel_for_double": {
      "description": "A choice model between a continuous number of ordered alternatives.",
      "oneOf": [
        {
          "description": "Choose the alternative using Continuous Logit probabilities.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Logit"
              ]
            },
            "value": {
              "$ref": "#/definitions/LogitModel_for_double"
            }
          }
        }
      ]
    },
    "LogitModel_for_double": {
      "title": "Logit Model",
      "description": "A discrete or continuous Logit model",
      "type": "object",
      "required": [
        "mu",
        "u"
      ],
      "properties": {
        "u": {
          "description": "Uniform random number between 0.0 and 1.0 for inversion sampling.",
          "type": "number",
          "format": "double",
          "maximum": 1.0,
          "minimum": 0.0
        },
        "mu": {
          "description": "Variance of the error terms, must be positive.",
          "type": "number",
          "format": "double",
          "minimum": 0.0001
        }
      }
    },
    "TravelUtility_for_double": {
      "description": "Representation of how the travel utility of an agent is computed.\n\n**Warning**: This is used to compute the travel *utility* (not the travel *cost*), which is usually negative.",
      "examples": [
        {
          "type": "Proportional",
          "value": -10.0
        },
        {
          "type": "Quadratic",
          "value": {
            "a": -5.0,
            "b": -2.0
          }
        }
      ],
      "oneOf": [
        {
          "description": "Travel utility is always null.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "None"
              ]
            }
          }
        },
        {
          "description": "Travel utility is proportional to the travel time.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Proportional"
              ]
            },
            "value": {
              "$ref": "#/definitions/ValueOfTime_for_double"
            }
          }
        },
        {
          "description": "Travel utility is a quadratic function of travel time: `u = a * tt + b * tt^2`.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Quadratic"
              ]
            },
            "value": {
              "type": "object",
              "required": [
                "a",
                "b"
              ],
              "properties": {
                "a": {
                  "description": "First-degree coefficient.",
                  "allOf": [
                    {
                      "$ref": "#/definitions/ValueOfTime_for_double"
                    }
                  ]
                },
                "b": {
                  "description": "Second-degree coefficient.",
                  "allOf": [
                    {
                      "$ref": "#/definitions/ValueOfTime_for_double"
                    }
                  ]
                }
              }
            }
          }
        }
      ]
    },
    "ValueOfTime_for_double": {
      "description": "Representation of a value of time, i.e., a utility amount per time unit, expressed in utility unit per second.",
      "type": "number",
      "format": "double"
    },
    "ChoiceModel_for_double": {
      "description": "A choice model between a finite number of alternatives.",
      "examples": [
        {
          "type": "Deterministic",
          "value": {
            "u": 0.5
          }
        }
      ],
      "oneOf": [
        {
          "description": "Choose the alternative with the largest utility.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Deterministic"
              ]
            },
            "value": {
              "$ref": "#/definitions/DeterministicChoiceModel_for_double"
            }
          }
        },
        {
          "description": "Choose the alternative using Logit probabilities.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Logit"
              ]
            },
            "value": {
              "$ref": "#/definitions/LogitModel_for_double"
            }
          }
        }
      ]
    },
    "DeterministicChoiceModel_for_double": {
      "title": "Deterministic choice model",
      "description": "Choose the alternative with the largest value.",
      "type": "object",
      "required": [
        "u"
      ],
      "properties": {
        "u": {
          "description": "Uniform random number between 0.0 and 1.0 to choose the alternative in case of tie.",
          "type": "number",
          "format": "double",
          "maximum": 1.0,
          "minimum": 0.0
        }
      }
    },
    "ScheduleUtility_for_double": {
      "description": "Model used to represent the schedule utility of an agent.",
      "examples": [
        {
          "type": "AlphaBetaGamma",
          "value": {
            "beta": 5.0,
            "desired_arrival": true,
            "gamma": 20.0,
            "t_star_high": 31350.0,
            "t_star_low": 27900.0
          }
        }
      ],
      "oneOf": [
        {
          "description": "The schedule utility is always null.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "None"
              ]
            }
          }
        },
        {
          "description": "The schedule utility is computed using the alpha-beta-gamma model.",
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "AlphaBetaGamma"
              ]
            },
            "value": {
              "$ref": "#/definitions/AlphaBetaGammaModel_for_double"
            }
          }
        }
      ]
    },
    "AlphaBetaGammaModel_for_double": {
      "title": "Alpha-Beta-Gamma Model",
      "description": "Compute the schedule-delay utility using Vickrey's alpha-beta-gamma model",
      "type": "object",
      "required": [
        "beta",
        "gamma",
        "t_star_high",
        "t_star_low"
      ],
      "properties": {
        "t_star_low": {
          "description": "The earliest desired arrival (or departure) time.",
          "allOf": [
            {
              "$ref": "#/definitions/Time_for_double"
            }
          ]
        },
        "t_star_high": {
          "description": "The latest desired arrival (or departure) time.",
          "allOf": [
            {
              "$ref": "#/definitions/Time_for_double"
            }
          ]
        },
        "beta": {
          "description": "The penalty for early arrivals (or departures), in utility per second.",
          "allOf": [
            {
              "$ref": "#/definitions/ValueOfTime_for_double"
            }
          ]
        },
        "gamma": {
          "description": "The penalty for late arrivals (or departures), in utility per second.",
          "allOf": [
            {
              "$ref": "#/definitions/ValueOfTime_for_double"
            }
          ]
        },
        "desired_arrival": {
          "description": "If `true`, `tstar_low` and `t_star_high` represent the desired arrival-time interval, otherwise they represent the desired departure-time interval.",
          "default": true,
          "type": "boolean"
        }
      }
    }
  }
}